//=============================================================================
//
// エネミークラス [enemy.cpp]
// Author : Sugawara Tsukasa
//
//=============================================================================

//=============================================================================
// インクルード
//=============================================================================
#include "enemy.h"
#include "manager.h"
#include "renderer.h"
#include "collision.h"
#include "player.h"
#include "game.h"
#include "fade.h"
#include "resource_manager.h"
//=============================================================================
// マクロ定義
//=============================================================================
#define MIN_LIFE	(0)	// ライフの最小
//=============================================================================
// コンストラクタ
//=============================================================================
CEnemy::CEnemy(PRIORITY Priority) : CCharacter(Priority)
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CEnemy::~CEnemy()
{

}

//=============================================================================
// オブジェクト生成
//=============================================================================
CEnemy * CEnemy::Create(D3DXVECTOR3 pos, D3DXVECTOR3 rot)
{
	// メモリ確保
	CEnemy *pEnemy = new CEnemy;

	// 初期化処理
	pEnemy->Init(pos, rot);

	return pEnemy;
}

//=============================================================================
// 初期化処理
//=============================================================================
HRESULT CEnemy::Init(D3DXVECTOR3 pos, D3DXVECTOR3 rot)
{
	// 初期化処理
	CCharacter::Init(pos, rot);			// 座標、角度

	return S_OK;
}

//=============================================================================
// 終了処理
//=============================================================================
void CEnemy::Uninit(void)
{
	// 終了処理
	CCharacter::Uninit();
}

//=============================================================================
// 更新処理
//=============================================================================
void CEnemy::Update(void)
{
	// 更新処理
	CCharacter::Update();

	// 状態処理
	UpdateState();

	// 体力の設定
	if (GetLife() <= MIN_LIFE)
	{
		// 状態設定
		SetState(CCharacter::STATE_DEAD);
	}
}

//=============================================================================
// 描画処理
//=============================================================================
void CEnemy::Draw(void)
{
	// 描画処理
	CCharacter::Draw();
}

//=============================================================================
// エネミーの状態
//=============================================================================
void CEnemy::UpdateState(void)
{
	// 状態
	int nState = GetState();

	// DEADの場合
	if (nState == CCharacter::STATE_DEAD)
	{
		// 死亡処理
		Death();
	}
}

//=============================================================================
// 死んだときの処理
//=============================================================================
void CEnemy::Death(void)
{
	// 終了処理
	Uninit();

	return;
}

//=============================================================================
// 攻撃の処理
//=============================================================================
void CEnemy::Attack(void)
{
}

//=============================================================================
// 移動の処理
//=============================================================================
void CEnemy::Move(void)
{
}
